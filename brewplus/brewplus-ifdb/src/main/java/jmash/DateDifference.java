/*
 * DateDifference.java
 *
 * Created on 19 gennaio 2007, 19.34
 */

package jmash;

import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import javax.swing.SpinnerDateModel;

/**
 *
 * @author Alessandro
 */
public class DateDifference extends javax.swing.JInternalFrame {

	/**
	 * 
	 */
	private static final long serialVersionUID = 7074825944697005095L;

	/** Creates new form DateDifference */
	public DateDifference() {
		initComponents();

		this.jSpinner1.setModel(this.mdlT);
		this.jSpinner2.setModel(this.mdlTC);
	}

	private SpinnerDateModel mdlT = new SpinnerDateModel();
	private SpinnerDateModel mdlTC = new SpinnerDateModel();

	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */
	// <editor-fold defaultstate="collapsed" desc="Generated
	// Code">//GEN-BEGIN:initComponents
	private void initComponents() {

		jSpinner1 = new javax.swing.JSpinner();
		jSpinner2 = new javax.swing.JSpinner();
		jTextField1 = new javax.swing.JTextField();
		jTextField2 = new javax.swing.JTextField();
		jScrollPane1 = new javax.swing.JScrollPane();
		txt = new javax.swing.JTextArea();

		setFont(getFont());

		jSpinner1.addChangeListener(new javax.swing.event.ChangeListener() {
			public void stateChanged(javax.swing.event.ChangeEvent evt) {
				jSpinner1StateChanged(evt);
			}
		});

		jSpinner2.addChangeListener(new javax.swing.event.ChangeListener() {
			public void stateChanged(javax.swing.event.ChangeEvent evt) {
				jSpinner2StateChanged(evt);
			}
		});

		jTextField1.setText("jTextField1");

		jTextField2.setText("jTextField1");

		txt.setColumns(20);
		txt.setRows(5);
		jScrollPane1.setViewportView(txt);

		org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
		getContentPane().setLayout(layout);
		layout.setHorizontalGroup(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING).add(layout
				.createSequentialGroup().addContainerGap()
				.add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
						.add(org.jdesktop.layout.GroupLayout.LEADING, jScrollPane1)
						.add(org.jdesktop.layout.GroupLayout.LEADING, layout.createSequentialGroup()
								.add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
										.add(jTextField1).add(jSpinner1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,
												142, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
								.add(36, 36, 36)
								.add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
										.add(jTextField2).add(jSpinner2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,
												140, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))))
				.addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));
		layout.setVerticalGroup(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
				.add(layout.createSequentialGroup().add(48, 48, 48)
						.add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
								.add(jSpinner1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,
										org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,
										org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
								.add(jSpinner2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,
										org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,
										org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
						.add(58, 58, 58)
						.add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
								.add(jTextField1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,
										org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,
										org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
								.add(jTextField2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,
										org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,
										org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
						.addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
						.add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 235, Short.MAX_VALUE)
						.addContainerGap()));

		pack();
	}// </editor-fold>//GEN-END:initComponents

	private void jSpinner2StateChanged(javax.swing.event.ChangeEvent evt) {// GEN-FIRST:event_jSpinner2StateChanged

		calc();
	}// GEN-LAST:event_jSpinner2StateChanged

	private void jSpinner1StateChanged(javax.swing.event.ChangeEvent evt) {// GEN-FIRST:event_jSpinner1StateChanged

		calc();
	}// GEN-LAST:event_jSpinner1StateChanged

	// Variables declaration - do not modify//GEN-BEGIN:variables
	private javax.swing.JScrollPane jScrollPane1;
	private javax.swing.JSpinner jSpinner1;
	private javax.swing.JSpinner jSpinner2;
	private javax.swing.JTextField jTextField1;
	private javax.swing.JTextField jTextField2;
	private javax.swing.JTextArea txt;
	// End of variables declaration//GEN-END:variables
	GregorianCalendar cal1 = new GregorianCalendar();
	GregorianCalendar cal2 = new GregorianCalendar();

	public void calc() {

		Date d1 = (Date) this.mdlT.getValue();
		Date d2 = (Date) this.mdlTC.getValue();

		this.cal1.setTime(d1);
		this.cal2.setTime(d2);

		// jTextField1.setText(cal1+"");
		// jTextField2.setText(cal2+"");

		int dayDiff = this.cal2.get(Calendar.DAY_OF_YEAR) - this.cal1.get(Calendar.DAY_OF_YEAR);
		int yearDiff = this.cal2.get(Calendar.YEAR) - this.cal1.get(Calendar.YEAR);
		int monthDiff = this.cal2.get(Calendar.MONTH) - this.cal1.get(Calendar.MONTH);
		String s = "";
		s += "\nDiff. giorni = " + (dayDiff + yearDiff * 365);
		s += "\nDiff. mesi = " + (monthDiff + yearDiff * 12);
		this.txt.setText(s);

	}

}
